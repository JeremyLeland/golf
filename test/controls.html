<link rel='stylesheet' href='../style.css'>

<body>
  <div id="debug"></div>
</body>

<script type='module'>
  import { Game } from '../src/Game.js';
  import { World } from '../src/World.js';
  import { Wall } from '../src/Wall.js';
  import { Ball } from '../src/Ball.js';

  

  const walls = [
    new Wall( 0, 100, 100, 200 ),
    new Wall( 100, 200, 200, 200 ),
    new Wall( 200, 200, 300, 100 ),
    new Wall( 300, 100, 200, 0 ),
    new Wall( 200, 0, 100, 0 ),
    new Wall( 100, 0, 0, 100 ),
  ];

  const ball = new Ball();
  const world = new World();

  ball.x = 150;
  ball.y = 150;
  
  // const debug = document.getElementById( 'debug' );
  const game = new Game();

  let aimAngle, aimDist;

  game.update = ( dt ) => {
    world.update( { ball: ball, walls: walls, dt: dt } );

    if ( ball.isAtRest() ) {
      ball.aimAt( game.mouseX - game.scrollX, game.mouseY - game.scrollY );

      if ( game.mouseDown ) {
        ball.hit();
      }
    }
  };

  game.draw = ( ctx ) => {

    // debug.innerHTML = `dx: ${ ball.dx }<br>dy: ${ ball.dy })`;
      
    ball.draw( ctx );
    walls.forEach( wall => wall.draw( ctx ) );
  };

</script>