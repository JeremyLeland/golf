<title>Step-by-step control of world update</title>
<link rel="stylesheet" href="../style.css">

<style>
  #time {
    position: absolute;
    bottom: 0;
    width: 99%;
  }
</style>

<input id="time" type="range" min="0" value="0" max="5000" step="10"/>

<script type="module">
  import { Canvas } from '../src/Canvas.js';
  import { World } from '../src/World.js';
  import * as Level from '../src/Level.js';
  import { Line } from '../src/Line.js';
  import { Constants } from '../src/Golf.js';


  const levelJSON = {"loops":[[[6.166315774700928,-0.3871280043589157],[5.9399141117475445,1.1109056081498085],[5.2179552970254655,4.446925383768065],[9.305485293021677,5.116246266059886],[11.359225816028035,4.161272632504065],[12.307853023366066,4.179922543203369],[12.321859205263276,4.964303695260543],[12.82179574622797,4.984473597504872],[12.846339341954128,4.190509127350206],[13.71811542933272,4.207648153148362],[14.430742505589414,3.5038987402570685],[14.895666618263897,3.657564396918668],[14.712572756346065,4.545804674792279],[13.662283956212498,6.424654286314796],[1.737782384545218,6.9741124632676925],[-3.8833551803249593,7.399342138501061],[-12.536665653107823,5.893818925811798],[-11.541865602125103,-6.136322648526683],[-11.269911668447252,-0.43404178524754666],[-10.631228250570878,1.4913833831418914],[-9.087930415227731,1.2254282176082523],[-10.191924153238954,5.3607922320157755],[-3.80854636792684,5.91934975372355],[3.9592307752810676,-0.35052377032121107],[3.9816368106754325,-2.297763345073644],[-4.753861132073534,-4.103049406453976],[-5.510138065329524,-0.4400496347075924],[-1.7988994096421198,-0.41999788559045625],[-6.711247099904352,2.7430083081361287],[-6.856647180450103,-3.263893097425095],[-8.111623209705682,-4.419521442321577],[-6.940947318084969,-4.2344067765906725],[-7.056921643670904,-6.495869222066134],[5.0717736165169525,-4.688805989938807]]],"spawn":[-9.45767575322812,4.222381635581062],"goal":[12.275175644028103,4.160187353629976,12.875175644028104,4.960187353629976]}

  let world = new World( levelJSON );

  const SIZE = 16;
  const canvas = new Canvas();
  canvas.zoom = 1 / SIZE;
  canvas.scrollX = SIZE / 2;
  canvas.scrollY = SIZE / 2;
  
  canvas.draw = ( ctx ) => {
    world.draw( ctx );
  }

  let lastTime = 0;

  const slider = document.getElementById( 'time' );
  slider.value = lastTime;
  slider.focus();

  slider.addEventListener( 'input', e => {
    const currentTime = +e.target.value;

    world.update( currentTime - lastTime );

    lastTime = currentTime;

    canvas.redraw();
  } );
  

</script>